<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login Panel with History</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #2c3e50;
    color: white;
  }
  header {
    padding: 20px;
    background: #34495e;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  h1 {
    margin: 0;
  }
  #auth {
    padding: 20px;
  }
  input {
    margin: 5px 0;
    padding: 8px;
    width: 100%;
    box-sizing: border-box;
  }
  button {
    padding: 8px 16px;
    margin-top: 10px;
    border: none;
    background: #1e90ff;
    color: white;
    border-radius: 4px;
    cursor: pointer;
  }
  #dashboard {
    display: none;
    padding: 20px;
  }
  /* Styles for login history panel */
  #logs-container {
    display: none;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    margin: 20px;
    max-height: 300px;
    overflow: auto;
    color: black;
  }
  #logs-container h3 {
    margin-top: 0;
  }
  #logs-list {
    list-style: none;
    padding: 0;
  }
  #logs-list li {
    padding: 5px 0;
    border-bottom: 1px solid #ccc;
  }
</style>
</head>
<body>

<header>
  <h1>Login Panel</h1>
  <div>
    <!-- Link to view logs will be added dynamically -->
  </div>
</header>

<!-- Login/Register Section -->
<div id="auth">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Username" />
  <input type="password" id="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
</div>

<!-- Dashboard Section -->
<div id="dashboard">
  <h2>Welcome, <span id="user-name"></span></h2>
  <button id="logoutBtn">Logout</button>
  <!-- Link to view login logs -->
  <a href="#" id="view-logs" style="margin-left:20px; color:#fff; cursor:pointer;">View Login Logs</a>
</div>

<!-- Login History Panel -->
<div id="logs-container">
  <h3>Login History</h3>
  <ul id="logs-list"></ul>
  <button id="close-logs">Close</button>
</div>

<script>
  // Sample users data
  const users = {
    admin: { password: 'admin123', role: 'admin' },
    user1: { password: 'user123', role: 'user' }
  };

  // Elements
  const authSection = document.getElementById('auth');
  const dashboard = document.getElementById('dashboard');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const userNameSpan = document.getElementById('user-name');
  const viewLogsLink = document.getElementById('view-logs');

  // Log login events
  function logLoginEvent(username) {
    let loginHistory = JSON.parse(localStorage.getItem('loginHistory') || '[]');
    loginHistory.push({ user: username, time: new Date().toLocaleString() });
    localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
  }

  // Show login logs
  document.getElementById('view-logs').addEventListener('click', () => {
    const logs = JSON.parse(localStorage.getItem('loginHistory') || '[]');
    const logsList = document.getElementById('logs-list');
    logsList.innerHTML = '';
    logs.slice().reverse().forEach(entry => {
      const li = document.createElement('li');
      li.textContent = `User: ${entry.user} | Time: ${entry.time}`;
      logsList.appendChild(li);
    });
    document.getElementById('logs-container').style.display = 'block';
  });

  // Close logs
  document.getElementById('close-logs').addEventListener('click', () => {
    document.getElementById('logs-container').style.display = 'none';
  });

  // Login handler
  loginBtn.onclick = () => {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();
    if(users[username] && users[username].password === password) {
      // Successful login
      localStorage.setItem('currentUser', username);
      logLoginEvent(username);
      showDashboard(username);
      usernameInput.value = '';
      passwordInput.value = '';
    } else {
      alert('Invalid username or password');
    }
  };

  // Show dashboard
  function showDashboard(username) {
    authSection.style.display = 'none';
    dashboard.style.display = 'block';
    document.getElementById('user-name').textContent = username;
  }

  // Logout handler
  logoutBtn.onclick = () => {
    localStorage.removeItem('currentUser');
    authSection.style.display = 'block';
    dashboard.style.display = 'none';
  };

  // On page load, check if user is already logged in
  window.onload = () => {
    const currentUser = localStorage.getItem('currentUser');
    if(currentUser && users[currentUser]) {
      showDashboard(currentUser);
    } else {
      authSection.style.display = 'block';
      dashboard.style.display = 'none';
    }
  };
</script>

</body>
</html>